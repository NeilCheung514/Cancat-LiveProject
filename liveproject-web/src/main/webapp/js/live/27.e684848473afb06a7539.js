(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1309:function(t,e,n){},1310:function(t,e,n){},1311:function(t,e,n){},1312:function(t,e,n){},1313:function(t,e,n){},1314:function(t,e,n){},1315:function(t,e,n){},1316:function(t,e,n){},1360:function(t,e,n){t.exports=n.p+"static/img/guard-animation-3.da178e1.png"},1361:function(t,e,n){t.exports=n.p+"static/img/guard-animation-2.b23f23d.png"},1362:function(t,e,n){t.exports=n.p+"static/img/guard-animation-1.3b5c2c3.png"},1373:function(t,e,n){"use strict";var r=n(1309);n.n(r).a},1375:function(t,e,n){"use strict";var r=n(1310);n.n(r).a},1376:function(t,e,n){var r={"./guard-animation-1.png":1362,"./guard-animation-2.png":1361,"./guard-animation-3.png":1360};function i(t){var e=o(t);return n(e)}function o(t){var e=r[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=1376},1378:function(t,e,n){"use strict";var r=n(1311);n.n(r).a},1380:function(t,e,n){"use strict";var r=n(1312);n.n(r).a},1382:function(t,e,n){"use strict";var r=n(1313);n.n(r).a},1384:function(t,e,n){"use strict";var r=n(1314);n.n(r).a},1385:function(t,e,n){t.exports=n.p+"static/img/guard-pic-3.3b16199.png"},1386:function(t,e,n){t.exports=n.p+"static/img/guard-pic-2.9f84ce4.png"},1387:function(t,e,n){t.exports=n.p+"static/img/guard-pic-1.9da6a13.png"},1388:function(t,e,n){t.exports=n.p+"static/img/4.9a0fa96.png"},1389:function(t,e,n){t.exports=n.p+"static/img/3.044e0b0.png"},1390:function(t,e,n){t.exports=n.p+"static/img/2.549de2c.png"},1391:function(t,e,n){t.exports=n.p+"static/img/1.b595dbe.png"},1392:function(t,e,n){t.exports=n.p+"static/img/6.ff4f53f.png"},1393:function(t,e,n){t.exports=n.p+"static/img/5.ccb511a.png"},1394:function(t,e,n){t.exports=n.p+"static/img/4.044e0b0.png"},1395:function(t,e,n){t.exports=n.p+"static/img/3.549de2c.png"},1396:function(t,e,n){t.exports=n.p+"static/img/2.4ab51b4.png"},1397:function(t,e,n){t.exports=n.p+"static/img/1.01cbd40.png"},1398:function(t,e,n){t.exports=n.p+"static/img/6.ff4f53f.png"},1399:function(t,e,n){t.exports=n.p+"static/img/5.1c525c7.png"},1400:function(t,e,n){t.exports=n.p+"static/img/4.044e0b0.png"},1401:function(t,e,n){t.exports=n.p+"static/img/3.549de2c.png"},1402:function(t,e,n){t.exports=n.p+"static/img/2.695a2ae.png"},1403:function(t,e,n){t.exports=n.p+"static/img/1.01cbd40.png"},1404:function(t,e,n){var r={"./guard-1/1.png":1403,"./guard-1/2.png":1402,"./guard-1/3.png":1401,"./guard-1/4.png":1400,"./guard-1/5.png":1399,"./guard-1/6.png":1398,"./guard-2/1.png":1397,"./guard-2/2.png":1396,"./guard-2/3.png":1395,"./guard-2/4.png":1394,"./guard-2/5.png":1393,"./guard-2/6.png":1392,"./guard-3/1.png":1391,"./guard-3/2.png":1390,"./guard-3/3.png":1389,"./guard-3/4.png":1388,"./guard-animation-1.png":1362,"./guard-animation-2.png":1361,"./guard-animation-3.png":1360,"./guard-pic-1.png":1387,"./guard-pic-2.png":1386,"./guard-pic-3.png":1385};function i(t){var e=o(t);return n(e)}function o(t){var e=r[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=1404},1406:function(t,e,n){"use strict";var r=n(1315);n.n(r).a},1408:function(t,e,n){"use strict";var r=n(1316);n.n(r).a},1550:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(1),a=n.n(o),c=n(5),s=n.n(c),u=n(4),l=n.n(u),p=n(2),d=n.n(p),f=n(9),h=n.n(f),v=n(8),g=n.n(v),y=n(10),m=n.n(y),b=n(3),k=n(12),x=n(28),w=n(62),_=n.n(w),C=n(18),T=n(171),I=n(110),O=n(14),P=n.n(O),M=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=m()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&h()(e,n,a),a},j=function(t){function e(){a()(this,e);var n=s()(this,t.apply(this,arguments));return n.isTarget=!1,n}return l()(e,t),e}(b.default);M([Object(k.Prop)({type:Number,default:3})],j.prototype,"level",void 0);var L=j=M([Object(k.Component)({})],j),S=(n(1408),n(6)),B=Object(S.a)(L,function(){var t=this.$createElement,e=this._self._c||t;return this.isTarget?e("a",[e("span",{staticClass:"guard-icon bg-cover dp-i-block",class:"guard-level-"+this.level})]):e("span",{staticClass:"guard-icon bg-cover dp-i-block",class:"guard-level-"+this.level})},[],!1,null,null,null).exports,G=[{desc:"舰长",level:3},{desc:"提督",level:2},{desc:"总督",level:1}],N={1:[{title:"道具优惠",desc:"折扣价购买摩天大楼和节奏风暴",type:"gift"},{title:"加速提升亲密度",desc:"每日亲密度上限变为3倍",type:"medal"},{title:"进场特效",desc:"进房间播放器公告提示，聊天区进入提示",type:"welcome"},{title:"弹幕特权",desc:"专享顶部悬停弹幕，专享基佬紫弹幕",type:"danmuColor"},{title:"反馈福利",desc:"购买即返银瓜子和神秘道具礼包",type:"silver"},{title:"发言特权",desc:"弹幕可输入40字",type:"danmuText"}],2:[{title:"道具优惠",desc:"折扣价购买摩天大楼和节奏风暴"},{title:"加速提升亲密度",desc:"每日亲密度上限变为2倍"},{title:"进场特效",desc:"聊天区进入提示"},{title:"弹幕特权",desc:"专享基佬紫弹幕"},{title:"反馈福利",desc:"购买即返银瓜子和神秘道具礼包"},{title:"发言特权",desc:"弹幕可输入40字"}],3:[{title:"加速提升亲密度",desc:"每日亲密度上限变为1.5倍"},{title:"进场特效",desc:"聊天区进入提示"},{title:"弹幕特权",desc:"专享基佬紫弹幕"},{title:"反馈福利",desc:"购买即返银瓜子和神秘道具礼包"}]},R="//link.bilibili.com/p/help/index#/great-navigation",E=n(25),U=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=m()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&h()(e,n,a),a},D=function(t){function e(){a()(this,e);var n=s()(this,t.apply(this,arguments));return n.TabListConfig=G,n.currentTabIndex=0,n}return l()(e,t),e.prototype.onWatchLevel=function(t){this.getCurrentIndex()},e.prototype.changeTab=function(t){this.currentTabIndex=t,this.$emit("changeTab",this.currentTab.level),Object(E.b)("ship_click",{shiptype:t+1})},e.prototype.getCurrentIndex=function(){var t=this;this.TabListConfig.some(function(e,n){if(e.level===t.level)return t.currentTabIndex=n,!0})},e.prototype.mounted=function(){this.getCurrentIndex()},P()(e,[{key:"currentTab",get:function(){return this.TabListConfig[this.currentTabIndex]}}]),e}(b.default);U([Object(k.Prop)({type:Number,default:1})],D.prototype,"level",void 0),U([Object(k.Watch)("level")],D.prototype,"onWatchLevel",null);var W=D=U([Object(k.Component)({components:{GuardIcon:B}})],D),q=(n(1406),Object(S.a)(W,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-box"},[n("ul",{staticClass:"list"},t._l(t.TabListConfig,function(e,r){return n("li",{staticClass:"item dp-i-block t-center p-relative pointer v-top",class:{active:e.level===t.currentTab.level},on:{click:function(e){t.changeTab(r)}}},[n("span",{staticClass:"item-cntr p-absolute"},[n("guard-icon",{staticClass:"v-middle",attrs:{level:e.level}}),t._v(t._s(e.desc))],1)])}))])},[],!1,null,"691477fa",null).exports),$=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=m()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&h()(e,n,a),a},F=function(t){function e(){a()(this,e);var n=s()(this,t.apply(this,arguments));return n.rightsConfig=N,n}return l()(e,t),e.prototype.assetsUrlFilter=function(t,e){return"background-image: url('"+n(1404)("./guard-"+t+"/"+e+".png")+"')"},e}(b.default);$([Object(k.Prop)({type:Number,default:1})],F.prototype,"level",void 0);var V=F=$([Object(k.Component)({components:{}})],F),A=(n(1384),Object(S.a)(V,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"guard-desc-box border-box"},[n("div",{staticClass:"guard-pic bg-cover dp-i-block v-top",class:"guard-level-"+t.level}),n("ul",{staticClass:"list dp-i-block v-top"},t._l(t.rightsConfig[t.level.toString()],function(e,r){return n("li",{staticClass:"item dp-i-block"},[n("div",{staticClass:"right-pic dp-i-block v-top bg-cover",style:t.assetsUrlFilter(t.level,r+1)}),n("div",{staticClass:"info dp-i-block v-top"},[n("p",{staticClass:"title"},[t._v(t._s(e.title))]),n("p",{staticClass:"desc"},[t._v(t._s(e.desc))])])])}))])},[],!1,null,"dd3f1a0e",null).exports),J=n(16),K=n(468),Y=n(7),z=n(182),H=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=m()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&h()(e,n,a),a},Q=function(t){function e(){return a()(this,e),s()(this,t.apply(this,arguments))}return l()(e,t),P()(e,[{key:"guardLevelText",get:function(){return z.a[this.ticketInfo.level]}},{key:"totalMoney",get:function(){return this.ticketInfo.totalPrice/1e3}}]),e}(b.default);H([Object(k.Prop)({type:Object})],Q.prototype,"ticketInfo",void 0);var X=Q=H([Object(k.Component)({components:{}})],Q),Z=(n(1382),Object(S.a)(X,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ticket-info"},[n("dl",[n("dt",[t._v("主播：")]),n("dd",[n("span",{staticClass:"striking"},[t._v(t._s(t.ticketInfo.masterUserName))])]),n("dt",[t._v("船票级别：")]),n("dd",[t._v(t._s(t.guardLevelText))]),n("dt",[t._v("登船时长：")]),n("dd",[t._v(t._s(t.ticketInfo.time)+"个月")]),n("dt",[t._v("登船有效期至：")]),n("dd",[t._v(t._s(t.ticketInfo.expiredTime))]),n("dt",[t._v("总计票价：")]),n("dd",[t._v("￥"+t._s(t.totalMoney))])]),n("p",{staticClass:"tip"},[t._v("温馨提示 : 完成支付后，您将成为主播"),n("span",{staticClass:"striking"},[t._v(t._s(t.ticketInfo.masterUserName)+" ( 房间号"+t._s(t.ticketInfo.roomid)+" )")]),t._v("的"+t._s(t.guardLevelText)+"喔！")])])},[],!1,null,"9c96faa6",null).exports),tt=n(17),et=n.n(tt),nt=function(t,e,n,r){return new(n||(n=d.a))(function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function c(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,c)}s((r=r.apply(t,e||[])).next())})},rt="返回 Code 非 0",it="/User/getUserInfo";function ot(){return nt(this,void 0,void 0,i.a.mark(function t(){var e,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,et.a.get(it);case 3:if(e=t.sent,"REPONSE_OK"===(n=e.data).code){t.next=9;break}return t.abrupt("return",{error:new Error(n.msg||it+" "+rt),errorType:"caution",errorMsg:n.msg,code:n.code,data:null});case 9:return r=n.data,t.abrupt("return",{data:r,error:null});case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",{error:t.t0,errorType:"error",errorMsg:"网络错误或服务器宕机",data:null});case 16:case"end":return t.stop()}},t,this,[[0,13]])}))}var at=function(t,e,n,r){return new(n||(n=d.a))(function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function c(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,c)}s((r=r.apply(t,e||[])).next())})};function ct(){return at(this,void 0,void 0,i.a.mark(function t(){var e,n,r,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot();case 2:if((e=t.sent).error){t.next=7;break}return n=e.data,r=n.gold,o=n.silver,t.next=7,Y.a.dispatch("baseInfoUser",{goldSeed:r,silverSeed:o});case 7:case"end":return t.stop()}},t,this)}))}var st,ut=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=m()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&h()(e,n,a),a},lt=function(t,e,n,r){return new(n||(n=d.a))(function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function c(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,c)}s((r=r.apply(t,e||[])).next())})};!function(t){t[t.online=1]="online",t[t.goldSeed=2]="goldSeed"}(st||(st={}));var pt=function(t){function e(){a()(this,e);var n=s()(this,t.apply(this,arguments));return n.guardBuyInfo={priceInfo:[],guardLevel:0,balance:0,masterUsername:"",roomId:0,expiredTime:0},n.errorMsg="",n.buyTime=1,n.maxTimeNumber=99999,n.isTimeValidate=!0,n.payMethodMap=st,n.selectPayMethod=st.goldSeed,n.errorPopup=null,n.isBalanceEnough=!0,n.ticketInfo={expiredTime:"--",totalPrice:0,level:0,time:0,roomid:0,masterUserName:"",payOnlineUrl:"",token:""},n.balanceNotEnoughTip="金瓜子余额不足",n.order="",n.showPopup=[],n.rightsUrl=R,n.orderUrl="",n.orderWindowName="",n.windowInstance=null,n}return l()(e,t),e.prototype.onWatchTotalPrice=function(t){this.isBalanceEnough=this.guardBuyInfo.balance>=t,this.isBalanceEnough||(this.selectPayMethod=st.online)},e.prototype.onMsg=function(){var t=this;T.b.on(T.a.refreshBuyInfo,function(){return lt(t,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBuyInfo();case 2:case"end":return t.stop()}},t,this)}))})},e.prototype.showGoldNotEnough=function(){var t=this,e=this;this.linkPopup({title:"支付",width:300,html:"当前瓜子不足，是否转为在线支付",button:{confirm:"在线支付",cancel:"再想想"}}).onInited(function(t){e.errorPopup=t}).onConfirm(function(e){return lt(t,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.close();case 2:this.selectPayMethod=st.online,this.getTicketInfo().then().catch();case 4:case"end":return t.stop()}},t,this)}))}).onCancel(function(e){return lt(t,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.close();case 2:case"end":return t.stop()}},t,this)}))})},e.prototype.setDefaultPayMethod=function(){this.guardBuyInfo.balance>=this.totalPrice?this.selectPayMethod=st.goldSeed:this.selectPayMethod=st.online},e.prototype.showTicket=function(){var t=this,e=this;this.linkPopup({title:"船票凭证",width:420,component:{data:function(){return{ticketInfo:e.ticketInfo}},components:{TicketInfo:Z},name:"GuardBuyTicketInfo",template:'<ticket-info :ticketInfo="ticketInfo"></ticket-info>'},button:{confirm:"支付船票",cancel:"再想想"}}).onInited(function(t){e.errorPopup=t}).onConfirm(function(n){return lt(t,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.close();case 2:if(this.selectPayMethod!==st.online){t.next=7;break}return t.next=5,e.payOnline();case 5:t.next=9;break;case 7:return t.next=9,e.payByGoldSeed();case 9:case"end":return t.stop()}},t,this)}))}).onCancel(function(e){return lt(t,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.close();case 2:case"end":return t.stop()}},t,this)}))})},e.prototype.showOrderConfirm=function(){var t=this;this.linkPopup({title:"正在支付中",width:380,html:'\n        <p style="padding:20px 0">请在支付完毕后点击下方的 "支付完成" 按钮喔！<(▰˘◡˘▰)></p>\n      ',button:{confirm:"支付完成",cancel:!1}}).onConfirm(function(e){return lt(t,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.close();case 2:return t.next=4,this.checkOrder();case 4:Object(E.b)("ship_finish");case 5:case"end":return t.stop()}},t,this)}))}).onCancel(function(t){t.close().then().catch()})},e.prototype.showContinuePayPopup=function(){var t=this;this.linkPopup({title:"支付未完成",width:380,html:'\n        <p style="padding:20px 0">你的船票支付未完成</p>\n      ',button:{confirm:"继续支付",cancel:!1}}).onConfirm(function(e){return lt(t,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.close();case 2:Object(E.b)("ship_continue"),window.open(this.orderUrl,this.orderWindowName),this.showOrderConfirm();case 5:case"end":return t.stop()}},t,this)}))}).onCancel(function(t){t.close().then().catch()})},e.prototype.showBlockedInfo=function(t){var e=this;this.linkPopup({title:"提示",width:300,html:"\n        <p>"+t+"</p>\n      ",button:{confirm:"确定",cancel:!1}}).onConfirm(function(t){return lt(e,void 0,void 0,i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:case"end":return e.stop()}},e,this)}))}).onCancel(function(t){t.close().then().catch()})},e.prototype.checkOrder=function(){return lt(this,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(K.checkOrderStatus)(this.order);case 2:if(!t.sent.error){t.next=7;break}this.showContinuePayPopup(),t.next=9;break;case 7:return t.next=9,this.buySuccessCallback();case 9:case"end":return t.stop()}},t,this)}))},e.prototype.payOnline=function(){return lt(this,void 0,void 0,i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(K.getPayOnlineUrl)(this.ticketInfo.payOnlineUrl);case 2:(e=t.sent).error?this.windowInstance.close():(this.order=e.data.order,this.orderUrl=e.data.cashier_url,window.open(e.data.cashier_url,this.orderWindowName),this.showOrderConfirm());case 4:case"end":return t.stop()}},t,this)}))},e.prototype.payByGoldSeed=function(){return lt(this,void 0,void 0,i.a.mark(function t(){var e,n,r=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(K.payGoldSeed)(this.level,this.ticketInfo.token,this.buyTime);case 2:if(!(e=t.sent).error){t.next=8;break}n=e.errorMsg,this.linkPopup({title:"提示",width:300,html:"\n          <p>"+n+"</p>\n        ",button:{confirm:"知道了！",cancel:!1}}).onConfirm(function(t){return lt(r,void 0,void 0,i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:case"end":return e.stop()}},e,this)}))}).onCancel(function(t){return lt(r,void 0,void 0,i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:case"end":return e.stop()}},e,this)}))}),t.next=10;break;case 8:return t.next=10,this.buySuccessCallback();case 10:case"end":return t.stop()}},t,this)}))},e.prototype.buySuccessCallback=function(){return lt(this,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.b.emit(T.a.closeGuardStore,null),T.b.emit(T.a.showAnimation,this.level),t.next=4,this.updateGuardData(this.level);case 4:return t.next=6,ct();case 6:case"end":return t.stop()}},t,this)}))},e.prototype.getBuyInfo=function(){return lt(this,void 0,void 0,i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(K.getGuardBuyInfo)();case 2:(e=t.sent).error||(this.guardBuyInfo=e.data,this.setDefaultPayMethod());case 4:case"end":return t.stop()}},t,this)}))},e.prototype.getTicketInfo=function(){return lt(this,void 0,void 0,i.a.mark(function t(){var e,n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(K.getTicketInfo)(this.selectPayMethod,this.level,this.buyTime);case 2:if(!(e=t.sent).error){t.next=9;break}n=e.code,r=e.errorMsg,301===n?this.showGoldNotEnough():this.showBlockedInfo(r),this.windowInstance.close(),t.next=17;break;case 9:if(this.ticketInfo=e.data,this.selectPayMethod!==st.online){t.next=15;break}return t.next=13,this.payOnline();case 13:t.next=17;break;case 15:return t.next=17,this.payByGoldSeed();case 17:case"end":return t.stop()}},t,this)}))},e.prototype.onChangeTimeNumber=function(t){var e=parseInt(t.target.value,10),n=!0;e>this.maxTimeNumber?(this.buyTime=this.maxTimeNumber,t.preventDefault()):0===e?(this.buyTime=1,t.preventDefault()):e<0?(this.buyTime=1,t.preventDefault()):isNaN(e)&&(n=!1),this.isTimeValidate=n},e.prototype.updateGuardData=function(t){return lt(this,void 0,void 0,i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.b)(I.a.setGuardLevel,t);case 2:case"end":return e.stop()}},e,this)}))},e.prototype.clickBuy=function(){return lt(this,void 0,void 0,i.a.mark(function t(){var e,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.quickLogin();case 2:return this.selectPayMethod===st.online&&(e="payGuard-"+Date.now(),n=window.open("",e),this.orderWindowName=e,this.windowInstance=n),t.next=5,this.getTicketInfo();case 5:case"end":return t.stop()}},t,this)}))},e.prototype.created=function(){this.onMsg()},P()(e,[{key:"returnSilver",get:function(){return this.totalPrice/3}},{key:"userGoldSeed",get:function(){return Y.a.state.baseInfoUser.goldSeed}},{key:"priceInfo",get:function(){return this.guardBuyInfo.priceInfo||[]}},{key:"currentPrice",get:function(){var t=this.level,e=null;return this.priceInfo.some(function(n){if(n.guardLevel===t)return e=n,!0}),e&&e.price||0}},{key:"totalPrice",get:function(){return this.currentPrice*this.buyTime}},{key:"currentGuardLevel",get:function(){return this.$store.getters.baseInfoUser.privilege.privilegeType}},{key:"isCanBuy",get:function(){var t=this.currentGuardLevel,e=!1;return(0===t||this.level<=t)&&(e=!0),e}},{key:"isBuyBtnEnable",get:function(){return this.isCanBuy&&this.isTimeValidate}},{key:"selectPayTitle",get:function(){return this.isBalanceEnough?"":this.balanceNotEnoughTip}},{key:"guardLevelText",get:function(){return z.a[this.level]}},{key:"masterUserName",get:function(){return this.guardBuyInfo.masterUsername}},{key:"roomId",get:function(){return this.guardBuyInfo.roomId}},{key:"buyExpiredTime",get:function(){var t=this.guardBuyInfo.expiredTime||(new Date).getTime();return this.currentGuardLevel>0&&this.currentGuardLevel===this.level?t+2592e6*this.buyTime:(new Date).getTime()+2592e6*this.buyTime}}]),e}(b.default);ut([Object(k.Prop)({type:Number})],pt.prototype,"level",void 0),ut([Object(k.Inject)("quickLogin")],pt.prototype,"quickLogin",void 0),ut([Object(k.Watch)("totalPrice")],pt.prototype,"onWatchTotalPrice",null);var dt=pt=ut([Object(k.Component)({components:{LinkButton:x.default,LinkInput:_.a,TicketInfo:Z},filters:{filterMoney:function(t){return J.numberFormat.autoParse(t)},filterGoldSeedToRMB:function(t){return t/1e3},filterTime:function(t){var e=new Date(t),n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return n+"年"+(r>=10?r:"0"+r)+"月"+(i>=10?i:"0"+i)+"日"}}})],pt),ft=(n(1380),Object(S.a)(dt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buy-info-box border-box p-relative"},[n("div",{staticClass:"left-part dp-i-block border-box"},[n("p",{staticClass:"buy-detail"},[t._v("完成支付后，您将成为主播"),n("span",{staticClass:"striking"},[t._v(" "+t._s(t.masterUserName||"--")+"（房间号"+t._s(t.roomId||"--")+"）")]),t._v("的"+t._s(t.guardLevelText)+"喔！"),n("a",{staticClass:"rights",attrs:{href:t.rightsUrl,target:"_blank"}},[t._v("特权对比")])]),n("div",{staticClass:"select-month"},[t._v("开通时长"),n("link-input",{staticClass:"ipt-month",attrs:{type:"number",min:"1",placeholder:"1",width:72},nativeOn:{keyup:function(e){t.onChangeTimeNumber(e)},change:function(e){t.onChangeTimeNumber(e)}},model:{value:t.buyTime,callback:function(e){t.buyTime=e},expression:"buyTime"}}),t._v("月"),n("span",{staticClass:"expired-date"},[t._v("有效期至 "+t._s(t._f("filterTime")(t.buyExpiredTime)))]),n("span",{staticClass:"tip"},[t._v("（注：1个月按30天计算）")])],1),n("div",{staticClass:"select-pay"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectPayMethod,expression:"selectPayMethod"}],attrs:{type:"radio",name:"payMethod",id:"payGold",disabled:!t.isBalanceEnough,title:t.selectPayTitle},domProps:{value:t.payMethodMap.goldSeed,checked:t._q(t.selectPayMethod,t.payMethodMap.goldSeed)},on:{__c:function(e){t.selectPayMethod=t.payMethodMap.goldSeed}}}),n("label",{class:{disabled:!t.isBalanceEnough},attrs:{for:"payGold",title:t.selectPayTitle}},[t._v("金瓜子余额："+t._s(t._f("filterMoney")(t.userGoldSeed)))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectPayMethod,expression:"selectPayMethod"}],attrs:{type:"radio",name:"payMethod",id:"payOnline"},domProps:{value:t.payMethodMap.online,checked:t._q(t.selectPayMethod,t.payMethodMap.online)},on:{__c:function(e){t.selectPayMethod=t.payMethodMap.online}}}),n("label",{attrs:{for:"payOnline"}},[t._v("在线支付")])]),n("div",[t._v("总额："),1===t.selectPayMethod?[n("span",{staticClass:"total-price striking"},[t._v(t._s(t._f("filterGoldSeedToRMB")(t.totalPrice)))]),t._v("元")]:[n("span",{staticClass:"total-price striking"},[t._v(t._s(t._f("filterMoney")(t.totalPrice)))]),t._v("金瓜子")],n("span",{staticClass:"act-info"},[t._v("购买返1/3银瓜子："),n("span",{staticClass:"striking"},[t._v(t._s(t._f("filterMoney")(t.returnSilver)))])])],2),n("div",{staticClass:"btn-box"},[n("link-button",{staticClass:"btn-go",attrs:{disabled:!t.isBuyBtnEnable},nativeOn:{click:function(e){t.clickBuy(e)}}},[t._v("确认上船")])],1)]),t.isCanBuy?t._e():n("div",{staticClass:"buy-tip p-relative m-auto t-center"},[t._v("您当前已经是更高阶的舰队成员，无法购买低阶船票")])])},[],!1,null,"e17c2eb4",null).exports),ht=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=m()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&h()(e,n,a),a},vt=function(t){function e(){a()(this,e);var n=s()(this,t.apply(this,arguments));return n.currentLevel=1,n}return l()(e,t),e.prototype.onWatchLevel=function(t){this.currentLevel=t},e.prototype.changeTab=function(t){this.currentLevel=t},e.prototype.mounted=function(){this.currentLevel=this.level},e}(b.default);ht([Object(k.Prop)({type:Number,default:1})],vt.prototype,"level",void 0),ht([Object(k.Watch)("level")],vt.prototype,"onWatchLevel",null);var gt=vt=ht([Object(k.Component)({components:{LinkButton:x.default,LinkInput:_.a,Tab:q,GuardDesc:A,BuyInfo:ft}})],vt),yt=(n(1378),Object(S.a)(gt,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("tab",{attrs:{level:this.currentLevel},on:{changeTab:this.changeTab}}),e("guard-desc",{attrs:{level:this.currentLevel}}),e("buy-info",{attrs:{level:this.currentLevel}})],1)},[],!1,null,"74d14fce",null).exports),mt=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=m()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&h()(e,n,a),a},bt=function(t){function e(){a()(this,e);var n=s()(this,t.apply(this,arguments));return n.level=0,n.showTime=4e3,n}return l()(e,t),e.prototype.show=function(t){var e=this;this.level=t,setTimeout(function(){e.level=0},this.showTime)},e.prototype.onMsg=function(){var t=this;T.b.on(T.a.showAnimation,function(e){t.show(e)})},e.prototype.created=function(){this.onMsg()},P()(e,[{key:"pic",get:function(){try{return n(1376)("./guard-animation-"+this.level+".png")}catch(t){0}}},{key:"picStyle",get:function(){return{backgroundImage:"url("+this.pic+")"}}}]),e}(b.default),kt=bt=mt([Object(k.Component)({components:{}})],bt),xt=(n(1375),Object(S.a)(kt,function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade"}},[this.level?e("div",{staticClass:"guard-animation-box p-fixed w-100 h-100"},[e("div",{staticClass:"mask p-absolute w-100 h-100"}),e("div",{staticClass:"guard-animation p-fixed bg-cover",style:this.picStyle})]):this._e()])},[],!1,null,"2fd77efe",null).exports),wt=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=m()(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&h()(e,n,a),a},_t=function(t,e,n,r){return new(n||(n=d.a))(function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function c(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,c)}s((r=r.apply(t,e||[])).next())})},Ct=function(t){function e(){a()(this,e);var n=s()(this,t.apply(this,arguments));return n.isShowGuardStore=!1,n.showLevel=1,n}return l()(e,t),e.prototype.closeGuardStore=function(){this.isShowGuardStore=!1},e.prototype.quickLogin=function(){return new d.a(function(t,e){try{Object(C.quickLogin)(),t()}catch(t){e(t)}})},e.prototype.onMsg=function(){var t=this;T.b.on(T.a.openGuardStore,function(e){return _t(t,void 0,void 0,i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.quickLogin();case 2:this.isShowGuardStore=!0,e&&e.level?this.showLevel=parseInt(e.level)||this.level:this.showLevel=Object(I.c)()||1,T.b.emit(T.a.refreshBuyInfo,null);case 5:case"end":return t.stop()}},t,this)}))}),T.b.on(T.a.closeGuardStore,function(){t.isShowGuardStore=!1})},e.prototype.created=function(){this.showLevel=this.level,this.onMsg()},e.prototype.mounted=function(){T.b.emit(T.a.guardStoreVMInit,null)},e}(b.default);wt([Object(k.Prop)({type:Number,default:1})],Ct.prototype,"level",void 0),wt([Object(k.Provide)("quickLogin")],Ct.prototype,"quickLogin",null);var Tt=Ct=wt([Object(k.Component)({components:{LinkButton:x.default,LinkInput:_.a,GuardMain:yt,Animation:xt}})],Ct),It=(n(1373),Object(S.a)(Tt,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.isShowGuardStore,expression:"isShowGuardStore"}],staticClass:"guard-store-box p-fixed w-100 h-100"},[e("div",{staticClass:"mask p-absolute w-100 h-100"}),e("div",{staticClass:"cntr p-fixed"},[e("guard-main",{attrs:{level:this.showLevel}}),e("div",{staticClass:"close icon-font icon-close p-absolute pointer",on:{click:this.closeGuardStore}})],1)])]),e("animation")],1)},[],!1,null,"523d1b14",null));e.default=It.exports}}]);